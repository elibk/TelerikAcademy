<!--CSS and jsConsole are made by technical trainer Doncho Minkov-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Order by</title>
	<link href="styles/js-console.css" rel="stylesheet" />
	<style>
		#number {
			border: 1px solid black;
			padding: 5px 15px;
			background-color: black;
			color: white;
			font-family: Consolas;
			margin-bottom: 5px;
		}

		a {
			color: black;
			border: 1px solid black;
			padding: 5px 15px;
			text-decoration: none;
			display: inline-block;
			margin: 15px 0;
		}

			a:hover {
				text-decoration: underline;
			}
	</style>
</head>
<body>
    <p>
       Write a function that groups an array of persons by age, first or last name. The function must return an associative array, with keys - the groups, and values -arrays with persons in this groups
       Use function overloading (i.e. just one function)
	</p>

	<a href="#" onclick="main()">Run</a>
	<div id="console">
	</div>
	<script src="scripts/js-console.js">	  
	</script>
	<script>
	    var sortedList;
	    function main() {

	        var persons = [
                { firstName: "Peter", lastName: "Petrov", age: 32 },
                { firstName: "Mitko", lastName: "Georgiev", age: 12 },
                { firstName: "Pesho", lastName: "Ivanov", age: 23 },
                { firstName: "Gosho", lastName: "Mahajlov", age: 3 },
                { firstName: "Bay Ivan", lastName: "Atanasov", age: 81 }];

	        var result = group(persons, 'age', true);
	        for (var i = 0; i < result.length; i++) {
	            jsConsole.writeLine(result[i].firstName + " " + result[i].lastName + " Age: " + result[i].age);
	        }
	    }

	    function group(stringList, propCraiteria, descending) {
	      
	        sortedList = [];
	        var descending = descending || false;
	        quickSort(stringList, propCraiteria);
	        if (descending) {
	          sortedList = sortedList.reverse();
	        }
	        return sortedList;
	    }

	    

	    function quickSort(stringList, propCraiteria) {
	        var pivot = "";
	        var propCraiteria = propCraiteria;
	        if (stringList.length <= 1) {
	            for (var i = 0; i < stringList.length; i++) {
	                sortedList.push(stringList[i]);
	            }
                
	            return;
	        }
	        else {
	            pivot = stringList[0];
	            stringList.shift();
	            var less = [];
	            var greater = [];
	            var result;
	            var i;
	            for (i = 0; i < stringList.length; i++) {
	                switch (propCraiteria) {
	                    case 'firstName':
	                        result = stringList[i].firstName > pivot.firstName;
	                        break;
	                    case 'lastName':
	                        result = stringList[i].lastName > pivot.lastName;
	                        break;
	                    case 'age':
	                        result = stringList[i].age > pivot.age;
	                        break;
	                    default:
	                        throw new Error("There is no property " + propCraiteria);
	                        break;
	                }
	                
                    if (result) {
                        greater.push(stringList[i]);
	                }
	                else {
                        less.push(stringList[i]);
	                }
	            }

	            quickSort(less, propCraiteria);
	            sortedList.push(pivot);
	            quickSort(greater, propCraiteria);
	        }            
	    }

	</script>
</body>
</html>
<!--CSS and jsConsole are made by technical trainer Doncho Minkov-->


